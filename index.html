<script>
window.addEventListener('DOMContentLoaded', function () {

  const width = window.innerWidth;
  const height = window.innerHeight;

  const stage = new Konva.Stage({
    container: 'container',
    width: width,
    height: height,
  });

  const layer = new Konva.Layer();
  stage.add(layer);

  let points = [];
  let line;

  stage.on('click tap', function () {
    const pos = stage.getPointerPosition();
    points.push(pos.x, pos.y);

    if (line) line.destroy();

    line = new Konva.Line({
      points: points,
      stroke: 'black',
      strokeWidth: 3,
      lineCap: 'round',
      lineJoin: 'round',
    });

    layer.add(line);
    layer.draw();
  });

  stage.on('dblclick dbltap', function () {
    points = [];
  });

});
</script>
