<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>RoomCraft Canvas</title>

  <!-- Load local Konva -->
  <script src="konva.min.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #f2f2f2;
      font-family: Arial, sans-serif;
    }
    #container {
      width: 100vw;
      height: 100vh;
    }
    #info {
      position: fixed;
      top: 10px;
      left: 10px;
      background: white;
      padding: 8px 12px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      z-index: 10;
    }
  </style>
</head>

<body>

<div id="info">Tap to create walls. Double tap to reset.</div>
<div id="container"></div>

<script>
window.addEventListener('load', function () {

  const width = window.innerWidth;
  const height = window.innerHeight;

  const stage = new Konva.Stage({
    container: 'container',
    width: width,
    height: height,
  });

  const layer = new Konva.Layer();
  stage.add(layer);

  let points = [];
  let currentLine = null;

  function drawLine() {
    if (currentLine) currentLine.destroy();

    currentLine = new Konva.Line({
      points: points,
      stroke: 'black',
      strokeWidth: 3,
      lineCap: 'round',
      lineJoin: 'round',
    });

    layer.add(currentLine);
    layer.draw();
  }

  stage.on('mousedown touchstart', function () {
    const pos = stage.getPointerPosition();
    points.push(pos.x, pos.y);
    drawLine();
  });

  stage.on('dblclick dbltap', function () {
    points = [];
    currentLine = null;
  });

  window.addEventListener('resize', function () {
    stage.width(window.innerWidth);
    stage.height(window.innerHeight);
  });

});
</script>

</body>
</html>
